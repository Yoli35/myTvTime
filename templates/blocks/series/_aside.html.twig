{% if user and serieId %}
    <div class="favorite" data-user="{{ user.id }}" data-media="{{ serieId }}">
        <div class="control">
            {{ 'Add to favorites'|trans }}
            <label class="switch">
                <input type="checkbox" {% if is_favorite(user.id, serieId, 'series') %} checked{% endif %}/>
                <span></span>
            </label>
        </div>
        <span class="message"></span>
    </div>
    <div class="timeShifted" data-user="{{ user.id }}" data-media="{{ serieId }}">
        <div class="control">
            {{ 'Airing D+1'|trans }}
            <label class="switch">
                <input type="checkbox" {% if isTimeShifted %} checked{% endif %}/>
                <span></span>
            </label>
        </div>
    </div>
    <div class="todos">
        TODOS
        <div class="todo">
            <div class="todo-text">Ajouter un switch pour masquer les épisodes et saisons à venir</div>
            <div class="todo-close"><i class="fa-solid fa-xmark"></i></div>
        </div>
    </div>
{% endif %}
<div class="key-facts">
    {% if user and serieId %}
        <h4>{{ 'Direct link'|trans }}</h4>
        <div class="direct-link">
            {% if serie.directLink|length %}
                <div class="label">{{ 'Watch now'|trans }}</div>
                {% for dl in serie.directLink %}
                    {% if dl.logoPath %}
                        <a href="{{ dl.url }}" target="_blank" class="link-pass" data-title="{{ 'Watch on'|trans }} {{ dl.name }}">
                            <img src="{{ dl.logoPath }}" alt="{{ dl.name }}">
                            <button class="link-tool" id="edit-direct-link" data-id="{{ serieId }}" data-title="{{ 'Edit url'|trans }}"><i class="fa-solid fa-pen"></i></button>
                        </a>
                    {% else %}
                        <a href="{{ dl.url }}" target="_blank" class="link-pass" data-title="{{ 'Click here to watch your series'|trans }}">
                            <i class="fa-solid fa-circle-arrow-right"></i>
                            <button class="link-tool" id="edit-direct-link" data-id="{{ serieId }}" data-title="{{ 'Edit url'|trans }}"><i class="fa-solid fa-pen"></i></button>
                        </a>
                    {% endif %}
                {% endfor %}
            {% else %}
                <div class="label">{{ 'Add a link'|trans }}</div>
                <button class="link-tool" id="new-direct-link" data-id="{{ serieId }}" data-title="{{ 'New url'|trans }}"><i class="fa-solid fa-circle-plus"></i></button>
            {% endif %}
        </div>
    {% endif %}
    <h4>{{ 'Key facts'|trans }}</h4>
    <div class="fact">
        <div class="fact-label">{{ 'Original name'|trans }}</div>
        <div class="fact-content">{{ serie.original_name }}</div>
    </div>
    <div class="fact">
        <div class="fact-label">{{ 'Original language'|trans }}</div>
        <div class="fact-content">{{ serie.original_language|language_name(locale) }}</div>
    </div>
    <div class="fact">
        <div class="fact-label">{{ 'Original Country'|trans }}</div>
        {% for country in serie.origin_country %}
            <div class="fact-content">{{ country|country_name(locale) }}</div>
        {% endfor %}
    </div>
    <div class="fact">
        <div class="fact-label">{{ 'Status'|trans }}</div>
        <div class="fact-content">{{ serie.status|trans }}</div>
    </div>
    {% if serie.networks|length %}
        <div class="fact">
            <div class="fact-label">{{ (serie.networks|length>1?'Networks':'Network')|trans }}</div>
            <div class="networks">
                {% for network in serie.networks %}
                    <div class="network-detail">
                        <div class="frame">
                            {% if network.logo_path %}
                                <img src="{{ imageConfig.url ~ imageConfig.logo_sizes.2 ~ network.logo_path }}" alt="{{ network.name }}">
                            {% else %}
                                {{ network.name }}
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}

    {% if keywords.results|length %}
        <div class="fact">
            <div class="label">{{ 'Keywords'|trans }}</div>
            <div class="keywords">
                {% for keyword in keywords.results %}
                    <div class="keyword{% if keyword.name in missingTranslations %} new{% endif %}" data-original="{{ keyword.name|trim }}">
                        <div class="original">{{ keyword.name|trim }}</div>
                        {% if keyword.name not in missingTranslations %}
                            <div class="translated">{{ keyword.name|trans({},'tags') }}</div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}

    {% if similar.results|length %}
        <div class="fact">
            <div class="label">{{ 'Similar Series'|trans }}</div>
            <div class="similar">
                {% for serie in similar.results %}
                    <a href="{{ path('app_series_tmdb', {'id': serie.id}) }}?p={{ page }}&from={{ from }}" title="{{ serie.name }}">
                        <div class="poster">
                            {% if serie.poster_path|length %}
                                <img src="{{ imageConfig.url ~ imageConfig.poster_sizes.3 ~ serie.poster_path }}" alt="{{ serie.name }}">
                            {% else %}
                                <img src="/images/default/no_poster.png" alt="{{ serie.name }}">
                                <div class="name">{{ serie.name }}</div>
                            {% endif %}
                            {% if serieIds|length %}
                                {% if serie.id in serieIds %}
                                    <div class="seen"><i class="fa-solid fa-eye"></i></div>
                                {% else %}
                                    <div class="add" data-id="{{ serie.id }}"><i class="fa-solid fa-circle-plus"></i></div>
                                {% endif %}
                            {% endif %}
                        </div>
                    </a>
                {% endfor %}
            </div>
        </div>
    {% endif %}
</div>
