{% extends 'base.html.twig' %}
{% block morecss %}
    {#    <link href="{{ asset("movie.css") }}" rel="stylesheet"> #}
{% endblock %}

{% block title %}myTvTime::{{ 'Movies'|trans }}::{{ 'Search by Name'|trans }}{% if discovers.page %}::{{ 'Page'|trans }} {{ discovers.page }}{% endif %}{% endblock %}
{% block body %}
    {#    {{ dump() }} #}
    <div class="container">

        {{ include('blocks/pageHeader.html.twig') }}

        <nav aria-label="{{ 'Navigation'|trans }}" class="nav-breadcrumb" style="--bs-breadcrumb-divider: 'â—¦';">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ path('app_home') }}">{{ 'Movies'|trans }}</a></li>
                <li class="breadcrumb-item active" aria-current="{{ 'Search by Name'|trans }}">{{ 'Search by Name'|trans }}</li>
            </ol>
        </nav>

        <div class="row">
            <div class="col-lg-3 col-md-1 col-sm"></div>
            <div class="col-lg-6 col-md-10 col-sm-12">
                {{ form_start(form) }}
                <div class="input-group input-group-sm mb-3">
                    <span class="input-group-text" id="basic-addon1"><i class="bi bi-search"></i></span>
                    {{ form_widget(form.query, {'attr': {'class': 'form-control', 'value': query}}) }}
                    {{ form_widget(form.year, {'attr': {'class': 'form-control', 'value': year}}) }}
                    {{ form_widget(form.save, { 'label': 'Search', 'attr': {'class': 'btn btn-secondary'} }) }}
                </div>
                {{ form_end(form) }}
            </div>
            <div class="col-lg-3 col-md-1 col-sm"></div>
        </div>

        {% if discovers.total_results > 0 %}
            <div class="row">
                <div class="home-discovers-footer-infos fs-4">
                    <div>{{ 'Movie Search Result'|trans }} : {{ discovers.total_results }} {{ ((discovers.total_results > 1) ? 'Movies'|trans : 'Movie'|trans) }}</div>
                </div>
            </div>
        {% endif %}

        <div class="home-discovers">
            <div class="content">
                {% for discover in discovers.results %}
                    {% if discover.poster_path is defined and discover.poster_path|length %}
                        {% set poster = imageConfig.url ~ imageConfig.poster_sizes.3 ~ discover.poster_path %}
                    {% else %}
                        {% set poster = "/images/default/no_poster_dark.png" %}
                    {% endif %}
                    {{ include('blocks/movie/discover.html.twig', { title: discover.title, poster: poster, id: discover.id, route: 'app_movie' }) }}

{#                    <div class="home-discover">#}
{#                        <a href="{{ path('app_movie', {id: discover.id}) }}">#}
{#                            {% if discover.poster_path %}#}
{#                                <img src="{{ imageConfig.url }}{{ imageConfig.poster_sizes.3 }}{{ discover.poster_path }}" alt="{{ discover.title }}">#}
{#                            {% else %}#}
{#                                <img src="/images/default/no_poster_dark.png" alt="{{ discover.title }}">#}
{#                            {% endif %}#}
{#                            <div class="title">{{ discover.title }}</div>#}
{#                            {% if discover.release_date is defined and discover.release_date|length %}#}
{#                                <div class="date">{{ 'Release Date'|trans }} : {{ discover.release_date|format_date('short') }}</div>#}
{#                            {% endif %}#}
{#                        </a>#}
{#                        #}{# Badges on seen Movies #}
{#                        {% if app.user is not null %}#}
{#                            <div class="has-been-seen{% if discover.id in userMovies %} yes{% endif %}" id="{{ discover.id }}"><i class="bi bi-check-circle-fill"></i></div>#}
{#                        {% endif %}#}
{#                    </div>#}
                {% endfor %}
            </div>
            {{ include('blocks/pageSearchFooter.html.twig') }}
        </div>
        {{ include('blocks/pageFooter.html.twig') }}
    </div>
{% endblock %}
{% block morejs %}
{% endblock %}