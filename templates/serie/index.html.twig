{% extends 'base.html.twig' %}

{% block title %}myTvTime ▶ ︎{{ 'My Series'|trans }}{% endblock %}
{% block description %}{{ 'List of all the series I have watched in my life'|trans }}{% endblock %}
{% block keywords %}{{ 'Series, Tv Shows'|trans }}{% endblock %}
{% block body %}
    {{ include('blocks/_mainMenu.html.twig') }}
    <div class="container-fluid">
        <div class="my-series">
            <div class="header">
                {{ include('blocks/serie/_quotes.html.twig') }}
                <h1>{{ 'My Series'|trans }}</h1>
                <div class="backdrop"></div>
                {{ include('blocks/_clock.html.twig') }}
            </div>

            {{ include('blocks/_nav.html.twig', {thisPage:('My Series'|trans)}) }}

            <main>
                <div class="series">
                    {% if series|length %}
                        <div class="series-tools mobile">
                            <div class="pages mobile">
                                {{ include('blocks/serie/_pagination.html.twig') }}
                            </div>
                        </div>
                        <div class="wrapper">
                            {% for serie in series %}
                                <div data-id="{{ serie.id }}">
                                    {{ include('blocks/serie/_card.html.twig') }}
                                </div>
                            {% endfor %}
                        </div>
                        <div class="series-tools bottom">
                            <div class="pages">
                                {{ include('blocks/serie/_pagination.html.twig') }}
                            </div>
                        </div>
                        <div class="series-tools">
                            <div class="pages">
                                {{ include('blocks/serie/_pagination.html.twig') }}
                            </div>
                            <div class="numbers">
                                {{ numbers.episodes }} {{ 'episodes'|trans }}
                                / {{ numbers.seasons }} {{ 'seasons'|trans }}
                            </div>
                            <div class="search-serie">
                                <h2>{{ 'Search my series'|trans }}</h2>
                                <label class="label" for="search-name">{{ 'Name of the serie'|trans }}</label>
                                <div class="group">
                                    <div class="field">
                                        <input id="search-name" type="search" value=""
                                               placeholder="{{ 'Start taping the name'|trans }}">
                                        <input id="search-id" type="hidden" value="-1">
                                    </div>
                                    <div>
                                        <button id="search_serie" class="disabled"
                                                type="submit">{{ 'Show'|trans }}</button>
                                    </div>
                                </div>
                            </div>
                            <div class="search-serie">
                                <h2>{{ 'Search series'|trans }}</h2>
                                <label class="label" for="search-tmdb-name">{{ 'Name of the serie'|trans }}</label>
                                <div class="group">
                                    <div class="field">
                                        <input id="search-tmdb-name" type="search" value=""
                                               placeholder="{{ 'Enter the name'|trans }}">
                                    </div>
                                    <div>
                                        <button id="search-tmdb-series" type="submit">{{ 'Search'|trans }}</button>
                                    </div>
                                </div>
                            </div>
                            <div class="add-serie">
                                <h2>{{ 'Add'|trans }}</h2>

                                <label class="label" for="new_serie">{{ 'New Serie Id'|trans }}</label>
                                <div class="group">
                                    <div class="field">
                                        <input id="new_serie" type="text" value="">
                                    </div>
                                    <div>
                                        <button id="add_serie" type="submit">{{ 'Add'|trans }}</button>
                                    </div>
                                </div>
                                <div class="help">
                                    <details>
                                        <summary><span class="label">{{ 'Help'|trans }}</span></summary>
                                        <div>
                                            <img src="https://www.themoviedb.org/assets/2/v4/logos/v2/blue_short-8e7b30f73a4020692ccca9c88bafe5dcb6f8a62a4c6bc55cd9ba82bb2cd95f6c.svg"
                                                 alt="The Movie Database (TMDB)" width="154" height="20"><br>
                                            {{ 'New Serie Help'|trans({
                                                '%link1%': '<a href="https://www.themoviedb.org" target="_blank" rel="noopener">The Movie Db site <i class="fa-solid fa-paperclip"></i></a>',
                                                '%link2%': '<a href="https://www.themoviedb.org/tv/4607-lost" target="_blank" rel="noopener">https://www.themoviedb.org/tv/4607-lost</a>',
                                                '%id%': '4607'})|raw }}
                                        </div>
                                    </details>
                                </div>
                            </div>
                            <div class="settings">
                                <h2>{{ 'Settings'|trans }}</h2>

                                <div class="per-page">
                                    <label class="label" for="per-page">{{ 'Results per page'|trans }}</label>
                                    <div class="field">
                                        {% set slider_value = 2 %}
                                        {% for key, value in pages.per_page_values %}
                                            {% if value == pages.per_page %}
                                                {% set slider_value = key %}
                                            {% endif %}
                                        {% endfor %}
                                        <input id="per-page" type="range" value="{{ slider_value }}"
                                               list="per-page-list"
                                               min="1" max="{{ pages.per_page_values|length }}">
                                        <datalist id="per-page-list">
                                            {% for key, value in pages.per_page_values %}
                                                <option value="{{ key }}" label="{{ value }}"></option>
                                            {% endfor %}
                                        </datalist>
                                        <div class="value">{{ pages.per_page }}</div>
                                    </div>
                                </div>
                                <div class="sort">
                                    <div class="group-settings">
                                        <div class="order-by">
                                            <label class="label" for="order-by">{{ 'Order by'|trans }}</label>
                                            <div class="field">
                                                <select id="order-by" class="left">
                                                    <option value="firstDateAir"{% if pages.order_by=='firstDateAir' %} selected{% endif %}>{{ 'First Air Date'|trans }}</option>
                                                    <option value="id"{% if pages.order_by=='id' %} selected{% endif %}>{{ 'Add order'|trans }}</option>
                                                    <option value="modifiedAt"{% if pages.order_by=='modifiedAt' %} selected{% endif %}>{{ 'Last modified by user'|trans }}</option>
                                                    <option value="updatedAt"{% if pages.order_by=='updatedAt' %} selected{% endif %}>{{ 'Last modified by TMDB'|trans }}</option>
                                                    <option value="name"{% if pages.order_by=='name' %} selected{% endif %}>{{ 'Name'|trans }}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="order">
                                            <label class="label" for="order">{{ 'Order'|trans }}</label>
                                            <div class="field">
                                                <select id="order" class="right">
                                                    <option value="desc"{% if pages.order=='desc' %} selected{% endif %}>{{ 'Descending'|trans }}</option>
                                                    <option value="asc"{% if pages.order=='asc' %} selected{% endif %}>{{ 'Ascending'|trans }}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="apply">
                                        <button id="apply" type="submit">{{ 'Apply'|trans }}</button>
                                    </div>
                                </div>
                            </div>
                            <div class="settings">
                                <div class="animation">
                                    <h3>{{ 'Animation'|trans }}</h3>
                                    <div class="leaf">
                                        <h4>
                                            {{ 'Leaf' }}
                                            <label class="switch">
                                                <input type="checkbox"/>
                                                <span></span>
                                            </label>
                                            <div class="anim-settings-toggler"></div>
                                            {#                                            <div class="anim-settings-toggler"><i class="fa-solid fa-gear"></i></div> #}
                                        </h4>
                                        <div class="anim-settings">
                                            <div class="slider" id="frequency">
                                                <div class="label">{{ 'Number'|trans }} (0-100)</div>
                                                <div class="control" data-name="number" data-type="range" data-min="0"
                                                     data-max="100" data-value="10"></div>
                                            </div>
                                            <div class="slider" id="life-length">
                                                <div class="label">{{ 'Life\'s Length'|trans }} (0-300sec)</div>
                                                <div class="control" data-name="life-length" data-type="interval"
                                                     data-min="0" data-max="300" data-min-value="2"
                                                     data-max-value="60"></div>
                                            </div>
                                            <div class="slider" id="initial-angle">
                                                <div class="label">{{ 'Initial angle'|trans }} (0°-360°)</div>
                                                <div class="control" data-name="initial-angle" data-type="range"
                                                     data-min="0" data-max="360" data-value="0"></div>
                                            </div>
                                            <div class="slider" id="turn-per-minute">
                                                <div class="label">{{ 'Turn per minute'|trans }} (0-100)</div>
                                                <div class="control" data-name="turn-per-minute" data-type="range"
                                                     data-min="0" data-max="100" data-value="5"></div>
                                            </div>
                                            <div class="slider" id="scale">
                                                <div class="label">{{ 'Scale'|trans }} (25%-500%)</div>
                                                <div class="control" data-name="scale" data-type="interval"
                                                     data-min="25"
                                                     data-max="500" data-min-value="25" data-max-value="200"></div>
                                            </div>
                                            <div class="save">
                                                <button>{{ 'Save'|trans }}</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div>Rien à afficher</div>
                    {% endif %}
                    <div class="new-serie-preview">
                        <div class="message">
                            <div class="content"></div>
                            <div class="close"><i class="fa-solid fa-circle-xmark"></i></div>
                        </div>
                        <div class="wrapper"></div>
                    </div>
                </div>
            </main>
        </div>
        {{ include('blocks/_pageFooter.html.twig') }}
    </div>
    <div id="globs-data" style="display: none">
        {
            "app_serie_index": "{{ path('app_serie_index') }}",
            "app_serie_new": "{{ path('app_serie_new') }}",
            "app_serie_show": "{{ path('app_serie_show', {id:0})|slice(0, -1) }}",
            "app_serie_search": "{{ path('app_serie_search') }}",
            "app_serie_set_settings": "{{ path('app_serie_set_settings') }}",
            "locale": "{{ app.request.locale }}",
            "current_page": {{ pages.page }},
            "per_page": {{ pages.per_page }},
            "order_by": "{{ pages.order_by }}",
            "order": "{{ pages.order }}",
            "from": "{{ from }}",
            "leaf_settings": {{ leafSettings.data|json_encode(constant('JSON_PRETTY_PRINT'))|raw }},
            "series_list": {{ seriesList|json_encode(constant('JSON_PRETTY_PRINT'))|raw }}
        }
    </div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="/js/seriesIndex.js" type="module"></script>
{% endblock %}