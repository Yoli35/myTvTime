{% extends 'base.html.twig' %}

{% block title %}myTvTime::{{ 'My account'|trans }}{% endblock %}

{% block body %}
    {#    {{ dump() }} #}
    <div class="container">
        {{ include('blocks/pageHeader.html.twig') }}

        {{ include('blocks/nav.html.twig', {thisPage: 'My account'|trans}) }}

        <div class="user-account">

            {{ include('blocks/user/banner.html.twig') }}

            <div class="details">
                {{ form_start(form) }}
                <div class="form-row">
                    <div class="field">
                        <label for="{{ form.email.vars.id }}" class="{{ form.email.vars.required ? 'required' }}">
                            <div>{{ form.email.vars.label|trans }}</div>
                            {{ form_widget(form.email) }}
                        </label>
                    </div>
                    <div class="field">
                        <label for="{{ form.username.vars.id }}" class="{{ form.username.vars.required ? 'required' }}">
                            <div>{{ form.username.vars.label|trans }}</div>
                            {{ form_widget(form.username) }}
                        </label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="field">
                        <label for="{{ form.city.vars.id }}" class="{{ form.city.vars.required ? 'required' }}">
                            <div>{{ form.city.vars.label|trans }}</div>
                            {{ form_widget(form.city) }}
                        </label>
                    </div>
                    <div class="field">
                        <label for="{{ form.zipCode.vars.id }}" class="{{ form.zipCode.vars.required ? 'required' }}">
                            <div>{{ form.zipCode.vars.label|trans }}</div>
                            {{ form_widget(form.zipCode) }}
                        </label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="field">
                        <label for="{{ form.country.vars.id }}" class="{{ form.country.vars.required ? 'required' }}">
                            <div>{{ form.country.vars.label|trans }}</div>
                            {{ form_widget(form.country) }}
                        </label>
                    </div>
                    <div class="field">
                        <label for="{{ form.preferredLanguage.vars.id }}" class="{{ form.preferredLanguage.vars.required ? 'required' }}">
                            <div>{{ form.preferredLanguage.vars.label|trans }}</div>
                            {{ form_widget(form.preferredLanguage) }}
                        </label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="field">
                        <label for="{{ form.dropThumbnail.vars.id }}" class="{{ form.dropThumbnail.vars.required ? 'required' }}">
                            <div>{{ form.dropThumbnail.vars.label|trans }}</div>
                            {{ form_widget(form.dropThumbnail) }}
                        </label>
                    </div>
                    <div class="field">
                        <label for="{{ form.dropBanner.vars.id }}" class="{{ form.dropBanner.vars.required ? 'required' }}">
                            <div>{{ form.dropBanner.vars.label|trans }}</div>
                            {{ form_widget(form.dropBanner) }}
                        </label>
                    </div>
                </div>
                <div class="form-row right">
                    {{ form_widget(form.save) }}
                </div>
                {{ form_end(form) }}
            </div>
        </div>

        {{ include('blocks/pageFooter.html.twig') }}

    </div>
{% endblock %}
{% block morejs %}
    <script>
        window.addEventListener("DOMContentLoaded", () => {

            setTimeout(() => {
                document.querySelector('#user_email').focus();
                document.querySelector('#user_email').select();
            }, 2000);

            const inputAvatar = document.querySelector('#user_dropThumbnail');
            const inputBanner = document.querySelector('#user_dropBanner');
            const banner = document.querySelector('#user-banner');
            const avatar = document.querySelector('#user-avatar');

            inputAvatar.addEventListener("mouseout", () => {
                avatar.firstElementChild.removeAttribute("style");
                avatar.removeAttribute("style");
            });

            inputAvatar.addEventListener("mouseenter", () => {
                avatar.firstElementChild.setAttribute("style", "border-color: #D81F26");
                avatar.setAttribute("style", "filter: sepia(0.8)");
            });

            inputBanner.addEventListener("mouseout", () => {
                banner.firstElementChild.removeAttribute("style");
                banner.querySelector("img").classList.remove("sepia");
            });

            inputBanner.addEventListener("mouseenter", () => {
                banner.firstElementChild.setAttribute("style", "border-color: #D81F26");
                banner.querySelector("img").classList.add("sepia");
            });
        })
    </script>
{% endblock %}